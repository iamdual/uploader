<?php
require __DIR__ . '/../src/Uploader.php';

use \iamdual\Uploader;

if (isset($_POST["data"])) {

    $upload = new Uploader(Uploader::from_base64($_POST["data"]));
    $upload->allowed_extensions(array("png", "jpg", "jpeg", "gif"));
    $upload->max_size(5); // in MB
    $upload->path("upload/files");
    $upload->name("unicorn");

    // While uploading file from base64 encoded file, you need to enable the "copy file" feature
    // by appending "true" to the upload() method. Otherwise file can not be uploaded!

    if (! $upload->upload(true)) {
        echo "Upload error: " . $upload->get_error();
    } else {
        echo "Upload successful: " . $upload->get_name();
    }

}
?>

<form action="" method="post">
    Enter Base64 encoded file: <input type="text" name="data" value="data:image/png;base64,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"> <input type="submit" value="Upload">
</form>
